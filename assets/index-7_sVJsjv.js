(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();function m(e,o,a){var r=e.createShader(o);if(e.shaderSource(r,a),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r)),e.deleteShader(r)}function S(e,o,a){var r=e.createProgram();if(e.attachShader(r,o),e.attachShader(r,a),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)}function O(e){e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW)}async function R(e){return await(await fetch(e)).text()}let B=[1,1,.7],P=[.1,.1,.1];const v=0,i=document.getElementById("gol-canvas"),G=30,H=1e3/G;i.width=i.clientWidth;i.height=i.clientHeight;const[c,s]=[i.clientWidth,i.clientHeight],L=[c,s],b={u_texture:{type:"1i",value:v},u_texSize:{type:"2f",value:L},u_aliveColor:{type:"3f",value:B},u_deadColor:{type:"3f",value:P}},x={u_texture:{type:"1i",value:v},u_texSize:{type:"2f",value:L}};i.style.backgroundColor=W(...P);const D=new Uint8Array(c*s);for(let e=0;e<s;e++)for(let o=0;o<c;o++){const a=e*c+o,r=Math.random()>.3?255:0;D[a]=r}function U(e,o,a,r){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,e.R8,o,a,0,e.RED,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const n=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),{fb:n,tex:t}}function y(e,o,a){for(const[r,t]of Object.entries(o))r.startsWith("u_")&&(t.location=e.getUniformLocation(a,r))}function F(e,o){for(const[a,{location:r,type:t,value:n}]of Object.entries(o))switch(t){case"1f":e.uniform1f(r,n);break;case"2f":e.uniform2f(r,...n);break;case"3f":e.uniform3f(r,...n);break;case"1i":e.uniform1i(r,n);break}}function V(e,o,a,r){const t=e.getContext("webgl2"),n=m(t,t.VERTEX_SHADER,o),u=m(t,t.FRAGMENT_SHADER,a),N=m(t,t.FRAGMENT_SHADER,r),d=S(t,n,u),A=S(t,n,N),h=t.getAttribLocation(d,"a_position"),w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),O(t);let E=t.createVertexArray();t.bindVertexArray(E),t.enableVertexAttribArray(h),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),y(t,x,A),y(t,b,d);const I=U(t,c,s,D),C=U(t,c,s,null);let f=I,T=C;function M(){t.useProgram(A),t.bindFramebuffer(t.FRAMEBUFFER,T.fb),t.viewport(0,0,c,s),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,f.tex),F(t,x),t.bindVertexArray(E),t.drawArrays(t.TRIANGLE_STRIP,0,4),[f,T]=[T,f]}function X(){t.useProgram(d),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,f.tex),F(t,b),t.bindVertexArray(E),t.drawArrays(t.TRIANGLE_STRIP,0,4)}let _=0;function l(p){p-_>=H&&(M(),_=p),X(),requestAnimationFrame(l)}l()}function W(e,o,a){function r(t){return Math.round(t*255).toString(16).padStart(2,"0").toUpperCase()}return`#${r(e)}${r(o)}${r(a)}`}V(i,await R("/vertexShader.glsl"),await R("/renderShader.glsl"),await R("/simulShader.glsl"));
